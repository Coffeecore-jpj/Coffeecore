<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoffeeLove ‚Äî Coffeecore</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="logo">Coffeecore</div>
    <nav>
      <a href="index.html">Home</a>
      <a href="stickers.html">Stickers</a>
      <a href="cases.html">Phone Cases</a>
      <a href="cart.html" class="icon-btn">
        üõí Cart <span id="cart-count">0</span>
      </a>
    </nav>
  </header>

  <main data-product-id="st1">
    <h2>CoffeeLove</h2>
    <img src="https://via.placeholder.com/300" alt="Coffee Sticker">
    <p>Price: Rs. 129</p>

    <!-- Quantity selector -->
    <div class="quantity-selector">
      <button type="button" id="decrease">-</button>
      <input type="number" id="quantity" value="1" min="1">
      <button type="button" id="increase">+</button>
    </div>

    <!-- Product buttons -->
    <div class="product-buttons">
      <button onclick="addToCart('st1','CoffeeLove',129)">Add to Cart</button>
      <button onclick="buyNow('st1','CoffeeLove',129)">Buy It Now</button>
    </div>

    <!-- Description -->
    <section class="product-description">
      <h3>Description</h3>
      <p>
        A cute coffee-themed sticker pack of 4, that can be applied to any smooth, clean surface. 
        Durable vinyl, glossy laminate, waterproof, scratchproof, and fade-resistant.
      </p>
    </section>

    <!-- Reviews -->
    <section class="review-section">
      <h3>Customer Reviews</h3>
      <div class="average-rating">
        <span class="stars" id="avg-stars">‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è‚≠êÔ∏è</span>
        <span id="avg-rating">(5.0 / 5)</span>
      </div>

      <form class="review-form" id="review-form">
        <label for="reviewer-name">Your Name</label>
        <input type="text" id="reviewer-name" placeholder="Type your name..." required />
        <label>Your Rating</label>
        <div class="rating-stars" id="rating-stars">
          <span data-value="1">‚≠ê</span>
          <span data-value="2">‚≠ê</span>
          <span data-value="3">‚≠ê</span>
          <span data-value="4">‚≠ê</span>
          <span data-value="5">‚≠ê</span>
        </div>
        <label for="review-text">Your Review</label>
        <textarea id="review-text" rows="4" placeholder="Share your experience..." required></textarea>
        <button type="submit" class="submit-review-btn">Submit Review</button>
      </form>

      <div class="review-list" id="review-list">
        <p>No reviews yet. Be the first to share your thoughts!</p>
      </div>
    </section>
  </main>

  <footer>¬© 2025 Coffeecore</footer>

  <script>
    // Initialize cart from localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Update cart UI count
    function updateCartUI() {
      const cartCount = document.getElementById('cart-count');
      if(cartCount) {
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        cartCount.textContent = totalItems;
      }
    }

    // Add to cart function
    function addToCart(id, name, price) {
      const qtyInput = document.getElementById('quantity');
      const quantity = parseInt(qtyInput.value) || 1;

      const existing = cart.find(item => item.id === id);
      if(existing) existing.quantity += quantity;
      else cart.push({id, name, price, quantity});

      localStorage.setItem('cart', JSON.stringify(cart));
      alert(name + " added to cart!");
      updateCartUI();
    }

    // Buy now function
    function buyNow(id, name, price) {
      const qtyInput = document.getElementById('quantity');
      const quantity = parseInt(qtyInput.value) || 1;

      localStorage.setItem('cart', JSON.stringify([{id, name, price, quantity}]));
      window.location.href = 'checkout.html';
    }

    // Quantity buttons
    const decreaseBtn = document.getElementById('decrease');
    const increaseBtn = document.getElementById('increase');
    const qtyInput = document.getElementById('quantity');

    decreaseBtn.addEventListener('click', () => {
      let val = parseInt(qtyInput.value) || 1;
      if(val > 1) qtyInput.value = val - 1;
    });

    increaseBtn.addEventListener('click', () => {
      let val = parseInt(qtyInput.value) || 1;
      qtyInput.value = val + 1;
    });

    updateCartUI();
  </script>
</body>
</html>
